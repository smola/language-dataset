Released EAS*1*103 SEQ #84
Extracted from mail message
**KIDS**:EAS*1.0*103^

**INSTALL NAME**
EAS*1.0*103
"BLD",7998,0)
EAS*1.0*103^ENROLLMENT APPLICATION SYSTEM^0^3110426^y
"BLD",7998,1,0)
^^6^6^3110425^
"BLD",7998,1,1,0)
This patch corrects a <STORE> error inadverdently introduced by an IB
"BLD",7998,1,2,0)
patch with the collection of eIV Eligibility/Benefit data from third
"BLD",7998,1,3,0)
parties.  A call in the 10-10 Print option can potentially trigger the
"BLD",7998,1,4,0)
<STORE> error if there are an inordinate number of these eIV Eligibility/
"BLD",7998,1,5,0)
Benefit entries.  This patch adjusts the original call to reduce the 
"BLD",7998,1,6,0)
data collection and size of the local parameter being created.
"BLD",7998,4,0)
^9.64PA^^
"BLD",7998,6.3)
1
"BLD",7998,"ABPKG")
n
"BLD",7998,"KRN",0)
^9.67PA^779.2^20
"BLD",7998,"KRN",.4,0)
.4
"BLD",7998,"KRN",.401,0)
.401
"BLD",7998,"KRN",.402,0)
.402
"BLD",7998,"KRN",.403,0)
.403
"BLD",7998,"KRN",.5,0)
.5
"BLD",7998,"KRN",.84,0)
.84
"BLD",7998,"KRN",3.6,0)
3.6
"BLD",7998,"KRN",3.8,0)
3.8
"BLD",7998,"KRN",9.2,0)
9.2
"BLD",7998,"KRN",9.8,0)
9.8
"BLD",7998,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7998,"KRN",9.8,"NM",1,0)
EASEZPVI^^0^B20529992
"BLD",7998,"KRN",9.8,"NM","B","EASEZPVI",1)

"BLD",7998,"KRN",19,0)
19
"BLD",7998,"KRN",19.1,0)
19.1
"BLD",7998,"KRN",101,0)
101
"BLD",7998,"KRN",409.61,0)
409.61
"BLD",7998,"KRN",771,0)
771
"BLD",7998,"KRN",779.2,0)
779.2
"BLD",7998,"KRN",870,0)
870
"BLD",7998,"KRN",8989.51,0)
8989.51
"BLD",7998,"KRN",8989.52,0)
8989.52
"BLD",7998,"KRN",8994,0)
8994
"BLD",7998,"KRN","B",.4,.4)

"BLD",7998,"KRN","B",.401,.401)

"BLD",7998,"KRN","B",.402,.402)

"BLD",7998,"KRN","B",.403,.403)

"BLD",7998,"KRN","B",.5,.5)

"BLD",7998,"KRN","B",.84,.84)

"BLD",7998,"KRN","B",3.6,3.6)

"BLD",7998,"KRN","B",3.8,3.8)

"BLD",7998,"KRN","B",9.2,9.2)

"BLD",7998,"KRN","B",9.8,9.8)

"BLD",7998,"KRN","B",19,19)

"BLD",7998,"KRN","B",19.1,19.1)

"BLD",7998,"KRN","B",101,101)

"BLD",7998,"KRN","B",409.61,409.61)

"BLD",7998,"KRN","B",771,771)

"BLD",7998,"KRN","B",779.2,779.2)

"BLD",7998,"KRN","B",870,870)

"BLD",7998,"KRN","B",8989.51,8989.51)

"BLD",7998,"KRN","B",8989.52,8989.52)

"BLD",7998,"KRN","B",8994,8994)

"BLD",7998,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",7998,"QUES",0)
^9.62^^
"BLD",7998,"REQB",0)
^9.611^1^1
"BLD",7998,"REQB",1,0)
EAS*1.0*70^2
"BLD",7998,"REQB","B","EAS*1.0*70",1)

"MBREQ")
0
"PKG",552,-1)
1^1
"PKG",552,0)
ENROLLMENT APPLICATION SYSTEM^EAS^ENROLLMENT
"PKG",552,20,0)
^9.402P^1^1
"PKG",552,20,1,0)
2^^EASXDR
"PKG",552,20,1,1)
 
"PKG",552,20,"B",2,1)

"PKG",552,22,0)
^9.49I^1^1
"PKG",552,22,1,0)
1.0^3010315^3010410^66481
"PKG",552,22,1,"PAH",1,0)
103^3110426
"PKG",552,22,1,"PAH",1,1,0)
^^6^6^3110426
"PKG",552,22,1,"PAH",1,1,1,0)
This patch corrects a <STORE> error inadverdently introduced by an IB
"PKG",552,22,1,"PAH",1,1,2,0)
patch with the collection of eIV Eligibility/Benefit data from third
"PKG",552,22,1,"PAH",1,1,3,0)
parties.  A call in the 10-10 Print option can potentially trigger the
"PKG",552,22,1,"PAH",1,1,4,0)
<STORE> error if there are an inordinate number of these eIV Eligibility/
"PKG",552,22,1,"PAH",1,1,5,0)
Benefit entries.  This patch adjusts the original call to reduce the 
"PKG",552,22,1,"PAH",1,1,6,0)
data collection and size of the local parameter being created.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","EASEZPVI")
0^1^B20529992^B19722232
"RTN","EASEZPVI",1,0)
EASEZPVI ;ALB/AMA,ERC,SCK; GATHER VISTA INSURANCE DATA TO PRINT FROM DG OPTIONS ; 06 Jul 2005  1:45 PM
"RTN","EASEZPVI",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,70,103**;Mar 15, 2001;Build 1
"RTN","EASEZPVI",3,0)
 ;
"RTN","EASEZPVI",4,0)
 Q
"RTN","EASEZPVI",5,0)
 ;
"RTN","EASEZPVI",6,0)
INSUR(EASDFN) ;GET INSURANCE DATA
"RTN","EASEZPVI",7,0)
 ;   INPUT:
"RTN","EASEZPVI",8,0)
 ;      EASDFN - POINTER TO THE PATIENT FILE
"RTN","EASEZPVI",9,0)
 ;
"RTN","EASEZPVI",10,0)
 ;IF THEY EXIST, FIND INSURANCE COMPANY NAME(S), ADDRESS,
"RTN","EASEZPVI",11,0)
 ;CITY, STATE, ZIP, PHONE, GROUP CODE(S), POLICY NUMBER(S),
"RTN","EASEZPVI",12,0)
 ;NAME(S) OF INSURED, MEDICARE PART A/B, AND EFFECTIVE DATE(S)
"RTN","EASEZPVI",13,0)
 ;
"RTN","EASEZPVI",14,0)
 ; 103 - MODIFY THE GETS^DIQ TO RETRIEVE ONLY NEEDED DATA ELEMENTS TO REDUCE THE THE LARGE NUMBER
"RTN","EASEZPVI",15,0)
 ; OF ELIGIBILITY/BENEFIT SUB-MULTIPLES THAT ARE BEING RETURNED.
"RTN","EASEZPVI",16,0)
 ; 
"RTN","EASEZPVI",17,0)
 N KEY,VDATA,MULTIPLE,INDA,IENS,INSUR,INSORT,FLD,TYPE,IEN,INPTR,NAME
"RTN","EASEZPVI",18,0)
 N STREET,CITY,STPTR,STATE,ZIP,PHONE,GRPCD,POLNO,INNAME,KEYNM,M,CAT
"RTN","EASEZPVI",19,0)
 S KEY=+$$KEY711^EASEZU1("APPLICANT HAS INSURANCE")
"RTN","EASEZPVI",20,0)
 S VDATA=$$GET^EASEZC1(EASDFN,"2^2^.3192")
"RTN","EASEZPVI",21,0)
 I (VDATA=-1)!(VDATA="") S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVI",22,0)
 I (VDATA'=-1),(VDATA'="") S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVI",23,0)
 Q:VDATA'="YES"
"RTN","EASEZPVI",24,0)
 ;
"RTN","EASEZPVI",25,0)
 S MULTIPLE=0
"RTN","EASEZPVI",26,0)
 S INDA=0 F  S INDA=$O(^DPT(EASDFN,.312,INDA)) Q:'INDA  D
"RTN","EASEZPVI",27,0)
 . D GETS^DIQ(2.312,INDA_","_EASDFN,".01;1.09;1;3;17;.18;21;8","IE","INSUR")
"RTN","EASEZPVI",28,0)
 S IENS="" F  S IENS=$O(INSUR(2.312,IENS)) Q:IENS=""  D
"RTN","EASEZPVI",29,0)
 . S FLD=0 F  S FLD=$O(INSUR(2.312,IENS,FLD)) Q:'FLD  D
"RTN","EASEZPVI",30,0)
 . . F TYPE="E","I" S INSORT(2.312,+IENS,FLD,TYPE)=$G(INSUR(2.312,IENS,FLD,TYPE))
"RTN","EASEZPVI",31,0)
 K INSUR
"RTN","EASEZPVI",32,0)
 S IEN=0 F  S IEN=$O(INSORT(2.312,IEN)) Q:'IEN  D
"RTN","EASEZPVI",33,0)
 . Q:'$G(INSORT(2.312,IEN,.18,"I"))
"RTN","EASEZPVI",34,0)
 . S INPTR=INSORT(2.312,IEN,.18,"I")
"RTN","EASEZPVI",35,0)
 . Q:$$GET1^DIQ(355.3,INPTR,.11,"I")   ;INACTIVE FLAG
"RTN","EASEZPVI",36,0)
 . I DT'>$G(INSORT(2.312,IEN,3,"I")) Q   ;INSUR EXPIRATION DATE
"RTN","EASEZPVI",37,0)
 . S NAME=$G(INSORT(2.312,IEN,.18,"E"))
"RTN","EASEZPVI",38,0)
 . S STREET=$$GET1^DIQ(36,INPTR,.111),CITY=$$GET1^DIQ(36,INPTR,.114)
"RTN","EASEZPVI",39,0)
 . S STPTR=$$GET1^DIQ(36,INPTR,.115,"I"),STATE=$$GET1^DIQ(5,STPTR,1)
"RTN","EASEZPVI",40,0)
 . S ZIP=$$GET1^DIQ(36,INPTR,.116),PHONE=$$GET1^DIQ(36,INPTR,.131)
"RTN","EASEZPVI",41,0)
 . S GRPCD=$$GET1^DIQ(355.3,INPTR,.04),POLNO=$G(INSORT(2.312,IEN,1,"E"))
"RTN","EASEZPVI",42,0)
 . S INNAME=$G(INSORT(2.312,IEN,17,"E"))
"RTN","EASEZPVI",43,0)
 . S MULTIPLE=MULTIPLE+1
"RTN","EASEZPVI",44,0)
 . I MULTIPLE=1 S KEYNM="APPLICANT",M=1
"RTN","EASEZPVI",45,0)
 . E  S KEYNM="OTHER(N)",M=MULTIPLE-1
"RTN","EASEZPVI",46,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE COMPANY")
"RTN","EASEZPVI",47,0)
 . I NAME]"" S ^TMP("EZDATA",$J,KEY,M,2)=NAME
"RTN","EASEZPVI",48,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE ADDRESS")
"RTN","EASEZPVI",49,0)
 . I STREET]"" S ^TMP("EZDATA",$J,KEY,M,2)=STREET
"RTN","EASEZPVI",50,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE CITY")
"RTN","EASEZPVI",51,0)
 . I CITY]"" S ^TMP("EZDATA",$J,KEY,M,2)=CITY
"RTN","EASEZPVI",52,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE STATE")
"RTN","EASEZPVI",53,0)
 . I STATE]"" S ^TMP("EZDATA",$J,KEY,M,2)=STATE
"RTN","EASEZPVI",54,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE ZIP")
"RTN","EASEZPVI",55,0)
 . I ZIP]"" S ^TMP("EZDATA",$J,KEY,M,2)=ZIP
"RTN","EASEZPVI",56,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE PHONE")
"RTN","EASEZPVI",57,0)
 . I PHONE]"" S ^TMP("EZDATA",$J,KEY,M,2)=PHONE
"RTN","EASEZPVI",58,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE GROUP CODE")
"RTN","EASEZPVI",59,0)
 . I GRPCD]"" S ^TMP("EZDATA",$J,KEY,M,2)=GRPCD
"RTN","EASEZPVI",60,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE POLICY HOLDER")
"RTN","EASEZPVI",61,0)
 . I INNAME]"" S ^TMP("EZDATA",$J,KEY,M,2)=INNAME
"RTN","EASEZPVI",62,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE POLICY NUMBER")
"RTN","EASEZPVI",63,0)
 . I POLNO]"" S ^TMP("EZDATA",$J,KEY,M,2)=POLNO
"RTN","EASEZPVI",64,0)
 . ;
"RTN","EASEZPVI",65,0)
 . I $$GET^EASEZC1(INPTR,"355.3^355.3^.09")="MEDICARE (M)" D
"RTN","EASEZPVI",66,0)
 . . S CAT=$$GET^EASEZC1(INPTR,"355.3^355.3^.14")
"RTN","EASEZPVI",67,0)
 . . I (CAT'="MEDICARE PART A"),(CAT'="MEDICARE PART B") Q
"RTN","EASEZPVI",68,0)
 . . S KEY=+$$KEY711^EASEZU1(CAT)
"RTN","EASEZPVI",69,0)
 . . S ^TMP("EZDATA",$J,KEY,M,2)="YES"
"RTN","EASEZPVI",70,0)
 . . S VDATA=$$GET^EASEZC1(EASDFN_";"_INDA,"2^2.312^8")
"RTN","EASEZPVI",71,0)
 . . Q:VDATA=""  Q:VDATA=-1
"RTN","EASEZPVI",72,0)
 . . S KEY=+$$KEY711^EASEZU1(CAT_" EFFECTIVE DATE")
"RTN","EASEZPVI",73,0)
 . . S ^TMP("EZDATA",$J,KEY,M,2)=VDATA
"RTN","EASEZPVI",74,0)
 ;
"RTN","EASEZPVI",75,0)
 Q
"RTN","EASEZPVI",76,0)
 ;
"RTN","EASEZPVI",77,0)
I408(EASDFN,MTDT,EASARRAY) ;retrieve ien(s) to files #408.12,#408.13,#408.21,#408.22
"RTN","EASEZPVI",78,0)
 ;   Modified from I408^EASEZI, called from V408^EASEZPV2
"RTN","EASEZPVI",79,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZPVI",80,0)
 ;        MTDT    = Means Test date
"RTN","EASEZPVI",81,0)
 ;output EASARRAY = ien(s) to files; passed by reference
"RTN","EASEZPVI",82,0)
 ;   array(408,"V",1) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;veteran data
"RTN","EASEZPVI",83,0)
 ;   array(408,"S",1) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;spouse data
"RTN","EASEZPVI",84,0)
 ;   array(408,"C",multiple) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;child data
"RTN","EASEZPVI",85,0)
 ;where ien_#408.13 = ien;global_root
"RTN","EASEZPVI",86,0)
 ;
"RTN","EASEZPVI",87,0)
 N Y,%F,X,%DT,MTDATE
"RTN","EASEZPVI",88,0)
 N SUB1,SUB2,INCYR,DGINC,DGREL,DGINR
"RTN","EASEZPVI",89,0)
 N I21,I22
"RTN","EASEZPVI",90,0)
 ;
"RTN","EASEZPVI",91,0)
 Q:'EASDFN
"RTN","EASEZPVI",92,0)
 S Y=MTDT,%F=5,X=$$FMTE^XLFDT(Y,%F),X=+$P(X,"/",3)-1,%DT="P"
"RTN","EASEZPVI",93,0)
 D ^%DT S MTDATE=Y
"RTN","EASEZPVI",94,0)
 ;retrieve all associated 408 records; refer to api call for docu
"RTN","EASEZPVI",95,0)
 I MTDT D ALL^DGMTU21(EASDFN,"VSC",MTDT)
"RTN","EASEZPVI",96,0)
 ;massage "V" and "S" nodes for clear use in for loop below
"RTN","EASEZPVI",97,0)
 S:$D(DGINC("V")) DGINC("V",1)=DGINC("V")
"RTN","EASEZPVI",98,0)
 S:$D(DGINR("V")) DGINR("V",1)=DGINR("V")
"RTN","EASEZPVI",99,0)
 S:$D(DGREL("V")) DGREL("V",1)=DGREL("V")
"RTN","EASEZPVI",100,0)
 S:$D(DGINC("S")) DGINC("S",1)=DGINC("S")
"RTN","EASEZPVI",101,0)
 S:$D(DGINR("S")) DGINR("S",1)=DGINR("S")
"RTN","EASEZPVI",102,0)
 S:$D(DGREL("S")) DGREL("S",1)=DGREL("S")
"RTN","EASEZPVI",103,0)
 ;
"RTN","EASEZPVI",104,0)
 F SUB1="V","S","C" D
"RTN","EASEZPVI",105,0)
 . Q:'$D(DGREL(SUB1))
"RTN","EASEZPVI",106,0)
 . S SUB2=0
"RTN","EASEZPVI",107,0)
 . F  S SUB2=$O(DGREL(SUB1,SUB2)) Q:'SUB2  D
"RTN","EASEZPVI",108,0)
 . . S EASARRAY(408,SUB1,SUB2)=DGREL(SUB1,SUB2)
"RTN","EASEZPVI",109,0)
 . . S I21=$G(DGINC(SUB1,SUB2))  ; 408.21 ien
"RTN","EASEZPVI",110,0)
 . . Q:'I21
"RTN","EASEZPVI",111,0)
 . . S INCYR=$$GET1^DIQ(408.21,I21_",",.01,"I")
"RTN","EASEZPVI",112,0)
 . . ;NOTE: The following two quit conditions are probably not
"RTN","EASEZPVI",113,0)
 . . ;      not necessary given the arrays being returned from
"RTN","EASEZPVI",114,0)
 . . ;      ALL^DGMTU21
"RTN","EASEZPVI",115,0)
 . . Q:'MTDT
"RTN","EASEZPVI",116,0)
 . . Q:(INCYR<MTDATE)
"RTN","EASEZPVI",117,0)
 . . S I22=$G(DGINR(SUB1,SUB2))  ;408.22 ien
"RTN","EASEZPVI",118,0)
 . . Q:$G(^DGMT(408.22,+I22,"MT"))=""
"RTN","EASEZPVI",119,0)
 . . ;
"RTN","EASEZPVI",120,0)
 . . S EASARRAY(408,SUB1,SUB2)=EASARRAY(408,SUB1,SUB2)_U_I21_U_I22
"RTN","EASEZPVI",121,0)
 Q
"RTN","EASEZPVI",122,0)
 ;
"VER")
8.0^22.0
"BLD",7998,6)
^84
**END**
**END**
